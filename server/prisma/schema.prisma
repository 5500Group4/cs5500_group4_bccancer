// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Donor {
  id                        Int       @id @default(autoincrement())
  pmm                       String?   // Personal Member Management ID
  smm                       String?   // Subscription Member Management ID
  vmm                       String?   // Volunteer Member Management ID
  exclude                   Boolean   // Indicates if this donor is excluded from communications
  deceased                  Boolean   // Indicates if this donor is deceased
  firstName                 String
  nickName                  String?
  lastName                  String
  organizationName          String?
  totalDonations            Float     @default(0)
  totalPledge               Float     @default(0)
  largestGift               Float?
  largestGiftAppeal         String?
  firstGiftDate             DateTime?
  lastGiftDate              DateTime?
  lastGiftAmount            Float?
  lastGiftRequest           String?
  lastGiftAppeal            String?
  addressLine1              String?
  addressLine2              String?
  city                      String?
  contactPhoneType          String?   // Phone type (e.g., home, mobile)
  phoneRestrictions         Boolean   // Indicates if phone communication is restricted
  emailRestrictions         Boolean   // Indicates if email communication is restricted
  communicationRestrictions String?   // General communication restrictions
  subscriptionEventsInPerson Boolean  // Subscription to in-person events
  subscriptionEventsMagazine Boolean  // Subscription to magazine
  communicationPreference    String?  // Communication preference (e.g., email, phone)
  events                    Event[]   @relation("EventAttendees")
}

model Event {
  id          Int      @id @default(autoincrement())
  name       String
  description String
  topic       String
  size        Int
  date        DateTime
  location    String
  attendees   Donor[] @relation("EventAttendees")
}
